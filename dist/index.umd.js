!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("react/jsx-runtime")):"function"==typeof define&&define.amd?define(["exports","react","react/jsx-runtime"],e):e((t||self).liteState={},t.react,t.jsx)}(this,function(t,e,n){function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}var o=function t(e,n){var o=r({},e);for(var i in n)o[i]="object"==typeof n[i]&&null!==n[i]?t(e[i]||{},n[i]):n[i];return o};t.HydrateState=function(t){var r=t.children,o=e.useState(!1),i=o[0],u=o[1];return e.useEffect(function(){u(!0)},[]),/*#__PURE__*/n.jsx(n.Fragment,{children:i?/*#__PURE__*/n.jsx("div",{children:r}):null})},t.broadcast=function(t){var e=null;return function(n){(e=new BroadcastChannel(t)).onmessage=function(t){var e=t.data,r=e.payload;"STATE_UPDATE"===e.type&&r&&"object"==typeof r&&n.setState(r)};var r=n.subscribe(function(t){!function(t){var n=Object.fromEntries(Object.entries(t).filter(function(t){return"function"!=typeof t[1]}));e&&e.postMessage({type:"STATE_UPDATE",payload:n})}(t)});return function(){e&&e.close(),r()}}},t.createStore=function(t,n){void 0===n&&(n=[]);for(var i=t({}),u=new Set,c=t,f=function(){return void 0===i&&(i=c(null),c=null),i},a=function(t){var e=o(i,t);(function(t,e){if(t===e)return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;for(var n in t)if(t.hasOwnProperty(n)&&(!e.hasOwnProperty(n)||t[n]!==e[n]))return!1;for(var r in e)if(e.hasOwnProperty(r)&&!t.hasOwnProperty(r))return!1;return!0})(i,e)||(i=e,u.forEach(function(t){return t(i)}))},s=function(t){return u.add(t),function(){u.delete(t)}},l={},d=function(){var t=v[p],e=t[1];"function"==typeof e&&(l[t[0]]=function(){var t=e.apply(void 0,[].slice.call(arguments))(i);a(t)})},p=0,v=Object.entries(t(i));p<v.length;p++)d();return n.forEach(function(t){return t({getState:f,setState:a,subscribe:s})}),function(t){void 0===t&&(t=f);var n=e.useRef(t(i)),o=e.useReducer(function(t){return t+1},0)[1];return e.useEffect(function(){var e=s(function(e){var r=t(e);n.current!==r&&(n.current=r,o())});return function(){e()}},[t]),r({},n.current,l,{getState:f,setState:a,subscribe:s})}},t.logging=function(){return function(t){var e=t.getState(),n=t.subscribe(function(t){console.log("Previous State:",e),console.log("New State:",t)});return function(){n()}}},t.preserve=function(t,e,n){return function(r){var o=function(){try{if("undefined"!=typeof window){var n=window[t].getItem(e);if(n)return JSON.parse(n)}}catch(t){console.error("Error while loading persisted state:",t)}}();if(r.setState(o||r.getState()),"undefined"!=typeof window)try{return r.subscribe(function(r){!function(r){try{if("undefined"!=typeof window&&window[t]){var o={};n.forEach(function(t){o[t]=r[t]});var i=JSON.stringify(o);window[t].setItem(e,i)}}catch(t){console.error("Error while persisting state:",t)}}(r)})}catch(t){}}}});
//# sourceMappingURL=index.umd.js.map
