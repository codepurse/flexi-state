var n=require("react");function t(){return t=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n},t.apply(this,arguments)}var r=function(n,t){if(n===t)return!0;if("object"!=typeof n||null===n||"object"!=typeof t||null===t)return!1;for(var r in n)if(n.hasOwnProperty(r)&&(!t.hasOwnProperty(r)||n[r]!==t[r]))return!1;for(var e in t)if(t.hasOwnProperty(e)&&!n.hasOwnProperty(e))return!1;return!0},e=function n(r,e){var o=t({},r);for(var u in e)o[u]="object"==typeof e[u]&&null!==e[u]?n(r[u]||{},e[u]):e[u];return o};exports.createStore=function(o,u,i){void 0===u&&(u=[]),void 0===i&&(i={});for(var c=o({}),f=new Set,a=o,v=i.onPreStateChange,s=i.onPostStateChange,l=function(){return void 0===c&&(c=a(null),a=null),c},p=function(n){var t=e(c,n);if(!r(c,t)){var o=t;"function"==typeof v&&(o=v(c,t)||t),c=o,f.forEach(function(n){return n(c)});var u=c;"function"==typeof s&&(u=s(c)||c),"function"==typeof i.onStateChange&&i.onStateChange(c,u),r(c,u)||(c=u,f.forEach(function(n){return n(c)}))}},h={},y=function(){var n=d[b],t=n[1];"function"==typeof t&&(h[n[0]]=function(){var n=t.apply(void 0,[].slice.call(arguments))(c);p(n)})},b=0,d=Object.entries(o(c));b<d.length;b++)y();var g=function(n){return f.add(n),function(){f.delete(n)}};return u.forEach(function(n){var r=n({getState:l,setState:p,subscribe:g,state:c,actions:h});if(r){var e=r.state,o=r.actions,u=void 0===o?{}:o;c=t({},c,void 0===e?{}:e),h=t({},h,u)}}),function(e){void 0===e&&(e=function(n){return n});var o=n.useRef(e(c)),u=n.useReducer(function(n){return n+1},0)[1];return n.useEffect(function(){var n=g(function(n){var t=e(n);r(o.current,t)||(o.current=t,u())});return function(){n()}},[e]),e&&e.toString()!==function(n){return n}.toString()?t({},o.current,Object.fromEntries(Object.entries(h).filter(function(n){return n[0]in o.current}))):t({},o.current,h)}};
//# sourceMappingURL=index.cjs.map
