var t=require("react"),n=require("react/jsx-runtime");function e(){return e=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},e.apply(this,arguments)}var r=function t(n,r){var o=e({},n);for(var i in r)o[i]="object"==typeof r[i]&&null!==r[i]?t(n[i]||{},r[i]):r[i];return o};exports.HydrateState=function(e){var r=e.children,o=t.useState(!1),i=o[0],u=o[1];return t.useEffect(function(){u(!0)},[]),/*#__PURE__*/n.jsx(n.Fragment,{children:i?/*#__PURE__*/n.jsx("div",{children:r}):null})},exports.channelBroadcast=function(t){var n=null;return function(e){(n=new BroadcastChannel(t)).onmessage=function(t){var n=t.data,r=n.payload;"STATE_UPDATE"===n.type&&r&&"object"==typeof r&&e.setState(r)};var r=e.subscribe(function(t){!function(t){var e=Object.fromEntries(Object.entries(t).filter(function(t){return"function"!=typeof t[1]}));n&&n.postMessage({type:"STATE_UPDATE",payload:e})}(t)});return function(){n&&n.close(),r()}}},exports.createStore=function(n,o){void 0===o&&(o=[]);for(var i=n({}),u=new Set,c=n,a=function(){return void 0===i&&(i=c(null),c=null),i},f=function(t){var n=r(i,t);(function(t,n){if(t===n)return!0;if("object"!=typeof t||null===t||"object"!=typeof n||null===n)return!1;for(var e in t)if(t.hasOwnProperty(e)&&(!n.hasOwnProperty(e)||t[e]!==n[e]))return!1;for(var r in n)if(n.hasOwnProperty(r)&&!t.hasOwnProperty(r))return!1;return!0})(i,n)||(i=n,u.forEach(function(t){return t(i)}))},s=function(t){return u.add(t),function(){u.delete(t)}},l={},p=function(){var t=v[d],n=t[1];"function"==typeof n&&(l[t[0]]=function(){var t=n.apply(void 0,[].slice.call(arguments))(i);f(t)})},d=0,v=Object.entries(n(i));d<v.length;d++)p();return o.forEach(function(t){return t({getState:a,setState:f,subscribe:s})}),function(n){void 0===n&&(n=a);var r=t.useRef(n(i)),o=t.useReducer(function(t){return t+1},0)[1];return t.useEffect(function(){var t=s(function(t){var e=n(t);r.current!==e&&(r.current=e,o())});return function(){t()}},[n]),e({},r.current,l,{getState:a,setState:f,subscribe:s})}},exports.logging=function(){return function(t){var n=t.getState(),e=t.subscribe(function(t){console.log("Previous State:",n),console.log("New State:",t)});return function(){e()}}},exports.preserve=function(t,n,e){return function(r){var o=function(){try{if("undefined"!=typeof window){var e=window[t].getItem(n);if(e)return JSON.parse(e)}}catch(t){console.error("Error while loading persisted state:",t)}}();if(r.setState(o||r.getState()),"undefined"!=typeof window)try{return r.subscribe(function(r){!function(r){try{if("undefined"!=typeof window&&window[t]){var o={};e.forEach(function(t){o[t]=r[t]});var i=JSON.stringify(o);window[t].setItem(n,i)}}catch(t){console.error("Error while persisting state:",t)}}(r)})}catch(t){}}};
//# sourceMappingURL=index.cjs.map
