import{useRef as n,useReducer as t,useEffect as r}from"react";function e(){return e=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n},e.apply(this,arguments)}var o=function(n,t){if(n===t)return!0;if("object"!=typeof n||null===n||"object"!=typeof t||null===t)return!1;for(var r in n)if(n.hasOwnProperty(r)&&(!t.hasOwnProperty(r)||n[r]!==t[r]))return!1;for(var e in t)if(t.hasOwnProperty(e)&&!n.hasOwnProperty(e))return!1;return!0},i=function n(t,r){var o=e({},t);for(var i in r)o[i]="object"==typeof r[i]&&null!==r[i]?n(t[i]||{},r[i]):r[i];return o},u=function(u,f,a){void 0===f&&(f=[]),void 0===a&&(a={});for(var c=u({}),v=new Set,s=u,l=a.onPreStateChange,p=a.onPostStateChange,h=function(){return void 0===c&&(c=s(null),s=null),c},y=function(n){var t=i(c,n);if(!o(c,t)){var r=t;"function"==typeof l&&(r=l(c,t)||t),c=r,v.forEach(function(n){return n(c)});var e=c;"function"==typeof p&&(e=p(c)||c),"function"==typeof a.onStateChange&&a.onStateChange(c,e),o(c,e)||(c=e,v.forEach(function(n){return n(c)}))}},b={},d=function(){var n=O[g],t=n[1];"function"==typeof t&&(b[n[0]]=function(){var n=t.apply(void 0,[].slice.call(arguments))(c);y(n)})},g=0,O=Object.entries(u(c));g<O.length;g++)d();var j=function(n){return v.add(n),function(){v.delete(n)}};return f.forEach(function(n){var t=n({getState:h,setState:y,subscribe:j,state:c,actions:b});if(t){var r=t.state,o=t.actions,i=void 0===o?{}:o;c=e({},c,void 0===r?{}:r),b=e({},b,i)}}),function(i){void 0===i&&(i=function(n){return n});var u=n(i(c)),f=t(function(n){return n+1},0)[1];return r(function(){var n=j(function(n){var t=i(n);o(u.current,t)||(u.current=t,f())});return function(){n()}},[i]),i&&i.toString()!==function(n){return n}.toString()?e({},u.current,Object.fromEntries(Object.entries(b).filter(function(n){return n[0]in u.current}))):e({},u.current,b)}};export{u as createStore};
//# sourceMappingURL=index.esm.js.map
