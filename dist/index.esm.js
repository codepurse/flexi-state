import{useRef as n,useReducer as r,useEffect as t,useState as e}from"react";import{jsx as o,Fragment as i}from"react/jsx-runtime";function u(){return u=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}return n},u.apply(this,arguments)}var c=function n(r,t){var e=u({},r);for(var o in t)e[o]="object"==typeof t[o]&&null!==t[o]?n(r[o]||{},t[o]):t[o];return e},f=function(e,o){void 0===o&&(o=[]);for(var i=e({}),f=new Set,a=e,s=function(){return void 0===i&&(i=a(null),a=null),i},l=function(n){var r=c(i,n);(function(n,r){if(n===r)return!0;if("object"!=typeof n||null===n||"object"!=typeof r||null===r)return!1;for(var t in n)if(n.hasOwnProperty(t)&&(!r.hasOwnProperty(t)||n[t]!==r[t]))return!1;for(var e in r)if(r.hasOwnProperty(e)&&!n.hasOwnProperty(e))return!1;return!0})(i,r)||(i=r,f.forEach(function(n){return n(i)}))},d=function(n){return f.add(n),function(){f.delete(n)}},v={},p=function(){var n=h[w],r=n[1];"function"==typeof r&&(v[n[0]]=function(){var n=r.apply(void 0,[].slice.call(arguments))(i);l(n)})},w=0,h=Object.entries(e(i));w<h.length;w++)p();return o.forEach(function(n){return n({getState:s,setState:l,subscribe:d})}),function(e){void 0===e&&(e=s);var o=n(e(i)),c=r(function(n){return n+1},0)[1];return t(function(){var n=d(function(n){var r=e(n);o.current!==r&&(o.current=r,c())});return function(){n()}},[e]),u({},o.current,v,{getState:s,setState:l,subscribe:d})}},a=function(n){var r=n.children,u=e(!1),c=u[0],f=u[1];return t(function(){f(!0)},[]),/*#__PURE__*/o(i,{children:c?/*#__PURE__*/o("div",{children:r}):null})},s=function(n,r,t){return function(e){var o=function(){try{if("undefined"!=typeof window){var t=window[n].getItem(r);if(t)return JSON.parse(t)}}catch(n){console.error("Error while loading persisted state:",n)}}();if(e.setState(o||e.getState()),"undefined"!=typeof window)try{return e.subscribe(function(e){!function(e){try{if("undefined"!=typeof window&&window[n]){var o={};t.forEach(function(n){o[n]=e[n]});var i=JSON.stringify(o);window[n].setItem(r,i)}}catch(n){console.error("Error while persisting state:",n)}}(e)})}catch(n){}}};export{a as HydrateState,f as createStore,s as preserve};
//# sourceMappingURL=index.esm.js.map
