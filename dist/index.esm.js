import{useRef as n,useReducer as t,useEffect as r,useState as e}from"react";function o(){return o=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n},o.apply(this,arguments)}var i=function n(t,r){var e=o({},t);for(var i in r)e[i]="object"==typeof r[i]&&null!==r[i]?n(t[i]||{},r[i]):r[i];return e},u=function(e,u){void 0===u&&(u=[]);for(var c=e({}),f=new Set,a=e,l=function(){return void 0===c&&(c=a(null),a=null),c},s=function(n){var t=i(c,n);(function(n,t){if(n===t)return!0;if("object"!=typeof n||null===n||"object"!=typeof t||null===t)return!1;for(var r in n)if(n.hasOwnProperty(r)&&(!t.hasOwnProperty(r)||n[r]!==t[r]))return!1;for(var e in t)if(t.hasOwnProperty(e)&&!n.hasOwnProperty(e))return!1;return!0})(c,t)||(c=t,f.forEach(function(n){return n(c)}))},v=function(n){return f.add(n),function(){f.delete(n)}},d={},p=function(){var n=h[w],t=n[1];"function"==typeof t&&(d[n[0]]=function(){var n=t.apply(void 0,[].slice.call(arguments))(c);s(n)})},w=0,h=Object.entries(e(c));w<h.length;w++)p();return u.forEach(function(n){return n({getState:l,setState:s,subscribe:v})}),function(e){void 0===e&&(e=l);var i=n(e(c)),u=t(function(n){return n+1},0)[1];return r(function(){var n=v(function(n){var t=e(n);i.current!==t&&(i.current=t,u())});return function(){n()}},[e]),o({},i.current,d,{getState:l,setState:s,subscribe:v})}},c=function(n){var t=n.children,o=e(!1),i=o[0],u=o[1];return r(function(){u(!0)},[]),h(Fragment,null,i?h("div",null,t):null)},f=function(n,t,r){return function(e){var o=function(){try{if("undefined"!=typeof window){var r=window[n].getItem(t);if(r)return JSON.parse(r)}}catch(n){console.error("Error while loading persisted state:",n)}}();if(e.setState(o||e.getState()),"undefined"!=typeof window)try{return e.subscribe(function(e){!function(e){try{if("undefined"!=typeof window&&window[n]){var o={};r.forEach(function(n){o[n]=e[n]});var i=JSON.stringify(o);window[n].setItem(t,i)}}catch(n){console.error("Error while persisting state:",n)}}(e)})}catch(n){}}};export{c as HydrateState,u as createStore,f as preserve};
//# sourceMappingURL=index.esm.js.map
