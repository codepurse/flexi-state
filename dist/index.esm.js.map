{"version":3,"file":"index.esm.js","sources":["../src/files/index.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\nexport const createStore = (initializeStore) => {\r\n  let state = initializeStore(null);\r\n  let listeners = [];\r\n\r\n  const getState = () => state;\r\n\r\n  const setState = (newState) => {\r\n    if (shallowEqual(state, newState)) return; // Check for shallow equality before updating state\r\n    state = newState; // Update state directly\r\n    listeners.forEach((listener) => listener(state));\r\n  };\r\n\r\n  const subscribe = (listener) => {\r\n    listeners.push(listener);\r\n    return () => {\r\n      listeners = listeners.filter((l) => l !== listener);\r\n    };\r\n  };\r\n\r\n  const actions = {};\r\n  for (const [key, action] of Object.entries(initializeStore(state))) {\r\n    if (typeof action === \"function\") {\r\n      actions[key] = (...args) => {\r\n        console.log(\"Action:\", key);\r\n        const updater = action(...args); // Get the updater function\r\n        const newState = updater(state); // Call the updater function with the current state\r\n        setState(newState);\r\n      };\r\n    }\r\n  }\r\n\r\n  return (selector = getState) => {\r\n    const [currentState, setCurrentState] = useState(selector(getState()));\r\n\r\n    useEffect(() => {\r\n      const unsubscribe = subscribe((newState) => {\r\n        const selectedState = selector(newState);\r\n        if (!shallowEqual(currentState, selectedState)) {\r\n          // Update state only if it has changed\r\n          setCurrentState(selectedState);\r\n        }\r\n      });\r\n      return unsubscribe;\r\n    }, [selector]);\r\n\r\n    return { ...currentState, ...actions }; // Return both state and actions\r\n  };\r\n};\r\n\r\nconst shallowEqual = (objA, objB) => {\r\n  if (objA === objB) return true;\r\n\r\n  if (\r\n    typeof objA !== \"object\" ||\r\n    objA === null ||\r\n    typeof objB !== \"object\" ||\r\n    objB === null\r\n  ) {\r\n    return false;\r\n  }\r\n\r\n  const keysA = Object.keys(objA);\r\n  const keysB = Object.keys(objB);\r\n\r\n  if (keysA.length !== keysB.length) return false;\r\n\r\n  for (let key of keysA) {\r\n    if (!objB.hasOwnProperty(key) || objA[key] !== objB[key]) return false;\r\n  }\r\n\r\n  return true;\r\n};\r\n"],"names":["createStore","initializeStore","state","listeners","getState","actions","_loop","_Object$entries$_i","_Object$entries","_i","key","action","newState","console","log","apply","slice","call","arguments","updater","shallowEqual","forEach","listener","Object","entries","length","selector","_useState","useState","currentState","setCurrentState","useEffect","push","selectedState","filter","l","_extends","objA","objB","keysA","keys","keysB","_i2","_keysA","hasOwnProperty"],"mappings":"oRAEa,IAAAA,EAAc,SAACC,GAoB1B,IAnBA,IAAIC,EAAQD,EAAgB,MACxBE,EAAY,GAEVC,EAAW,WAAM,OAAAF,CAAK,EAetBG,EAAU,CAAE,EAACC,EAAAA,WACd,IAAAC,EAAAC,EAAAC,GAAOC,EAAGH,EAAEI,GAAAA,EAAMJ,EAAA,GACC,mBAAXI,IACTN,EAAQK,GAAO,WAhBF,IAACE,EAiBZC,QAAQC,IAAI,UAAWJ,GAjBXE,EAkBID,EAAMI,WAAAC,EAAAA,GAAAA,MAAAC,KAAAC,WACLC,CAAQjB,GAlBzBkB,EAAalB,EAAOU,KACxBV,EAAQU,EACRT,EAAUkB,QAAQ,SAACC,GAAQ,OAAKA,EAASpB,EAAM,GAkB7C,EAEJ,EATAO,EAAAD,EAAAA,EAA4Be,OAAOC,QAAQvB,EAAgBC,IAAOO,EAAAD,EAAAiB,OAAAhB,IAAAH,IAWlE,gBAAQoB,QAAAA,IAAAA,IAAAA,EAAWtB,GACjB,IAAAuB,EAAwCC,EAASF,EAAStB,MAAnDyB,EAAYF,EAAEG,GAAAA,EAAeH,EAAA,GAapC,OAXAI,EAAU,WACR,IAvBeT,EA8Bf,OA7BFnB,EAAU6B,KADOV,EAuBe,SAACV,GAC7B,IAAMqB,EAAgBP,EAASd,GAC1BQ,EAAaS,EAAcI,IAE9BH,EAAgBG,EAEpB,GA3BK,WACL9B,EAAYA,EAAU+B,OAAO,SAACC,GAAM,OAAAA,IAAMb,CAAQ,EACpD,CA2BA,EAAG,CAACI,IAEJU,EAAA,CAAA,EAAYP,EAAiBxB,EAC/B,CACF,EAEMe,EAAe,SAACiB,EAAMC,GAC1B,GAAID,IAASC,EAAM,OAAO,EAE1B,GACkB,iBAATD,GACE,OAATA,GACgB,iBAATC,GACE,OAATA,EAEA,OACF,EAEA,IAAMC,EAAQhB,OAAOiB,KAAKH,GACpBI,EAAQlB,OAAOiB,KAAKF,GAE1B,GAAIC,EAAMd,SAAWgB,EAAMhB,OAAQ,OAAO,EAE1C,IAAAiB,IAAAA,EAAAC,EAAAA,EAAgBJ,EAAKG,EAAAC,EAAAlB,OAAAiB,IAAE,CAAlB,IAAIhC,EAAGiC,EAAAD,GACV,IAAKJ,EAAKM,eAAelC,IAAQ2B,EAAK3B,KAAS4B,EAAK5B,GAAM,OAC5D,CAAA,CAEA,OAAO,CACT"}