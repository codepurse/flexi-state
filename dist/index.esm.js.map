{"version":3,"file":"index.esm.js","sources":["../src/index.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nexport const createStore = (initializeStore) => {\n  let state = initializeStore(null);\n  let listeners = [];\n\n  const getState = () => state;\n\n  const setState = (newState) => {\n    if (shallowEqual(state, newState)) return;\n    state = newState; // Update state directly\n    listeners.forEach((listener) => listener(state));\n  };\n\n  const subscribe = (listener) => {\n    listeners.push(listener);\n    return () => {\n      listeners = listeners.filter((l) => l !== listener);\n    };\n  };\n\n  const actions = {};\n  for (const [key, action] of Object.entries(initializeStore(state))) {\n    if (typeof action === \"function\") {\n      actions[key] = (...args) => {\n        console.log(\"Action:\", key);\n        const updater = action(...args); // Get the updater function\n        const newState = updater(state); // Call the updater function with the current state\n        setState(newState);\n      };\n    }\n  }\n\n  return (selector = getState) => {\n    const [currentState, setCurrentState] = useState(selector(getState()));\n\n    useEffect(() => {\n      const unsubscribe = subscribe((newState) => {\n        const selectedState = selector(newState);\n        if (!shallowEqual(currentState, selectedState)) {\n          // Update state only if it has changed\n          setCurrentState(selectedState);\n        }\n      });\n      return unsubscribe;\n    }, [selector]);\n\n    return { ...currentState, ...actions }; // Return both state and actions\n  };\n};\n\nconst shallowEqual = (objA, objB) => {\n  if (objA === objB) return true;\n\n  if (\n    typeof objA !== \"object\" ||\n    objA === null ||\n    typeof objB !== \"object\" ||\n    objB === null\n  ) {\n    return false;\n  }\n\n  const keysA = Object.keys(objA);\n  const keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) return false;\n\n  for (let key of keysA) {\n    if (!objB.hasOwnProperty(key) || objA[key] !== objB[key]) return false;\n  }\n\n  return true;\n};\n"],"names":["createStore","initializeStore","state","listeners","getState","actions","_loop","_Object$entries$_i","_Object$entries","_i","key","action","newState","console","log","apply","slice","call","arguments","updater","shallowEqual","forEach","listener","Object","entries","length","selector","_useState","useState","currentState","setCurrentState","useEffect","push","selectedState","filter","l","_extends","objA","objB","keysA","keys","keysB","_i2","_keysA","hasOwnProperty"],"mappings":"oRAEa,IAAAA,EAAc,SAACC,GAoB1B,IAnBA,IAAIC,EAAQD,EAAgB,MACxBE,EAAY,GAEVC,EAAW,WAAM,OAAAF,CAAK,EAetBG,EAAU,CAAE,EAACC,EAAAA,WACd,IAAAC,EAAAC,EAAAC,GAAOC,EAAGH,EAAEI,GAAAA,EAAMJ,EAAA,GACC,mBAAXI,IACTN,EAAQK,GAAO,WAhBF,IAACE,EAiBZC,QAAQC,IAAI,UAAWJ,GAjBXE,EAkBID,EAAMI,WAAAC,EAAAA,GAAAA,MAAAC,KAAAC,WACLC,CAAQjB,GAlBzBkB,EAAalB,EAAOU,KACxBV,EAAQU,EACRT,EAAUkB,QAAQ,SAACC,GAAQ,OAAKA,EAASpB,EAAM,GAkB7C,EAEJ,EATAO,EAAAD,EAAAA,EAA4Be,OAAOC,QAAQvB,EAAgBC,IAAOO,EAAAD,EAAAiB,OAAAhB,IAAAH,IAWlE,gBAAQoB,QAAAA,IAAAA,IAAAA,EAAWtB,GACjB,IAAAuB,EAAwCC,EAASF,EAAStB,MAAnDyB,EAAYF,EAAEG,GAAAA,EAAeH,EAAA,GAapC,OAXAI,EAAU,WACR,IAvBeT,EA8Bf,OA7BFnB,EAAU6B,KADOV,EAuBe,SAACV,GAC7B,IAAMqB,EAAgBP,EAASd,GAC1BQ,EAAaS,EAAcI,IAE9BH,EAAgBG,EAEpB,GA3BK,WACL9B,EAAYA,EAAU+B,OAAO,SAACC,GAAM,OAAAA,IAAMb,CAAQ,EACpD,CA2BA,EAAG,CAACI,IAEJU,EAAA,CAAA,EAAYP,EAAiBxB,EAC/B,CACF,EAEMe,EAAe,SAACiB,EAAMC,GAC1B,GAAID,IAASC,EAAM,OAAO,EAE1B,GACkB,iBAATD,GACE,OAATA,GACgB,iBAATC,GACE,OAATA,EAEA,OACF,EAEA,IAAMC,EAAQhB,OAAOiB,KAAKH,GACpBI,EAAQlB,OAAOiB,KAAKF,GAE1B,GAAIC,EAAMd,SAAWgB,EAAMhB,OAAQ,OAAO,EAE1C,IAAAiB,IAAAA,EAAAC,EAAAA,EAAgBJ,EAAKG,EAAAC,EAAAlB,OAAAiB,IAAE,CAAlB,IAAIhC,EAAGiC,EAAAD,GACV,IAAKJ,EAAKM,eAAelC,IAAQ2B,EAAK3B,KAAS4B,EAAK5B,GAAM,OAC5D,CAAA,CAEA,OAAO,CACT"}