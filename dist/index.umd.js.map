{"version":3,"file":"index.umd.js","sources":["../src/index.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nexport const createStore = (initializeStore) => {\n  let state = initializeStore(null);\n  let listeners = [];\n\n  const getState = () => state;\n\n  const setState = (newState) => {\n    if (shallowEqual(state, newState)) return;\n    state = newState; // Update state directly\n    listeners.forEach((listener) => listener(state));\n  };\n\n  const subscribe = (listener) => {\n    listeners.push(listener);\n    return () => {\n      listeners = listeners.filter((l) => l !== listener);\n    };\n  };\n\n  const actions = {};\n  for (const [key, action] of Object.entries(initializeStore(state))) {\n    if (typeof action === \"function\") {\n      actions[key] = (...args) => {\n        console.log(\"Action:\", key);\n        const updater = action(...args); // Get the updater function\n        const newState = updater(state); // Call the updater function with the current state\n        setState(newState);\n      };\n    }\n  }\n\n  return (selector = getState) => {\n    const [currentState, setCurrentState] = useState(selector(getState()));\n\n    useEffect(() => {\n      const unsubscribe = subscribe((newState) => {\n        const selectedState = selector(newState);\n        if (!shallowEqual(currentState, selectedState)) {\n          // Update state only if it has changed\n          setCurrentState(selectedState);\n        }\n      });\n      return unsubscribe;\n    }, [selector]);\n\n    return { ...currentState, ...actions }; // Return both state and actions\n  };\n};\n\nconst shallowEqual = (objA, objB) => {\n  if (objA === objB) return true;\n\n  if (\n    typeof objA !== \"object\" ||\n    objA === null ||\n    typeof objB !== \"object\" ||\n    objB === null\n  ) {\n    return false;\n  }\n\n  const keysA = Object.keys(objA);\n  const keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) return false;\n\n  for (let key of keysA) {\n    if (!objB.hasOwnProperty(key) || objA[key] !== objB[key]) return false;\n  }\n\n  return true;\n};\n"],"names":["createStore","shallowEqual","objA","objB","keysA","Object","keys","keysB","length","_i2","_keysA","key","hasOwnProperty","initializeStore","state","listeners","getState","actions","_loop","_Object$entries$_i","_Object$entries","_i","action","newState","console","log","apply","slice","call","arguments","updater","forEach","listener","entries","selector","_useState","useState","currentState","setCurrentState","useEffect","push","selectedState","filter","l","_extends"],"mappings":"0eAEaA,IAiDPC,EAAe,SAACC,EAAMC,GAC1B,GAAID,IAASC,EAAM,OAAO,EAE1B,GACkB,iBAATD,GACE,OAATA,GACgB,iBAATC,GACE,OAATA,EAEA,OACF,EAEA,IAAMC,EAAQC,OAAOC,KAAKJ,GACpBK,EAAQF,OAAOC,KAAKH,GAE1B,GAAIC,EAAMI,SAAWD,EAAMC,OAAQ,OAAO,EAE1C,IAAAC,IAAAA,EAAAC,EAAAA,EAAgBN,EAAKK,EAAAC,EAAAF,OAAAC,IAAE,CAAlB,IAAIE,EAAGD,EAAAD,GACV,IAAKN,EAAKS,eAAeD,IAAQT,EAAKS,KAASR,EAAKQ,GAAM,OAC5D,CAAA,CAEA,OAAO,CACT,gBAvE2B,SAACE,GAoB1B,IAnBA,IAAIC,EAAQD,EAAgB,MACxBE,EAAY,GAEVC,EAAW,WAAM,OAAAF,CAAK,EAetBG,EAAU,CAAE,EAACC,EAAAA,WACd,IAAAC,EAAAC,EAAAC,GAAOV,EAAGQ,EAAEG,GAAAA,EAAMH,EAAA,GACC,mBAAXG,IACTL,EAAQN,GAAO,WAhBF,IAACY,EAiBZC,QAAQC,IAAI,UAAWd,GAjBXY,EAkBID,EAAMI,WAAAC,EAAAA,GAAAA,MAAAC,KAAAC,WACLC,CAAQhB,GAlBzBb,EAAaa,EAAOS,KACxBT,EAAQS,EACRR,EAAUgB,QAAQ,SAACC,GAAQ,OAAKA,EAASlB,EAAM,GAkB7C,EAEJ,EATAO,EAAAD,EAAAA,EAA4Bf,OAAO4B,QAAQpB,EAAgBC,IAAOO,EAAAD,EAAAZ,OAAAa,IAAAH,IAWlE,gBAAQgB,QAAAA,IAAAA,IAAAA,EAAWlB,GACjB,IAAAmB,EAAwCC,EAAAA,SAASF,EAASlB,MAAnDqB,EAAYF,EAAEG,GAAAA,EAAeH,EAAA,GAapC,OAXAI,EAAAA,UAAU,WACR,IAvBeP,EA8Bf,OA7BFjB,EAAUyB,KADOR,EAuBe,SAACT,GAC7B,IAAMkB,EAAgBP,EAASX,GAC1BtB,EAAaoC,EAAcI,IAE9BH,EAAgBG,EAEpB,GA3BK,WACL1B,EAAYA,EAAU2B,OAAO,SAACC,GAAM,OAAAA,IAAMX,CAAQ,EACpD,CA2BA,EAAG,CAACE,IAEJU,EAAA,CAAA,EAAYP,EAAiBpB,EAC/B,CACF"}